<div class="page-bar">

    <div class="pull-left">
        <h1 class="page-title">
            <i></i> Manage Products
            <small>Edit Product</small>
        </h1>
    </div>
    <div class="pull-right">
        <h4>
            <ul class="page-breadcrumb breadcrumb">
                <li>
                    <a routerLink="/main/dashboard/index">Home</a>
                </li>
                <li>
                    <a [routerLink]="['../']">Manage Products</a>
                </li>
                <li>
                    <span>Edit Product</span>
                </li>
            </ul>
        </h4>
    </div>

</div>
<!-- END PAGE BAR -->
<!-- <pre>{{propertyFull|json}}</pre>
<pre>{{product|json}}</pre> -->
<div class="row">
    <div class="col-md-12">
        <!-- BEGIN EXAMPLE TABLE PORTLET-->
        <div class="portlet light bordered" id="form_wizard_1">
            <div class="portlet-title">
                <div class="caption">
                    <!-- <i class=" fa fa-cubes font-red"></i> -->
                    <!-- <span class="caption-subject font-red sbold uppercase">Edit Product: -->
                    <span class="font-purple-intense"> {{product.Name}} </span>
                    <!-- </span> -->
                </div>
            </div>
            <div class="portlet-body form1">
                <!-- BEGIN FORM-->
                <form id="form_sample_1" #editProductForm="ngForm" (ngSubmit)="saveChange(editProductForm)" *ngIf="product" novalidate>
                    <div class="form-body">
                        <div class="tab-content">
                            <div class="alert alert-danger display-hide">
                                <button class="close" data-close="alert"></button> You have some form errors. Please check below. </div>
                            <div class="alert alert-success display-hide">
                                <button class="close" data-close="alert"></button> Your form validation is successful! </div>
                            <div class="row">
                                <!-- Info Product -->
                                <div class="col-md-8">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <div class="form-group form-md-line-input form-md-floating-label">
                                                <input type="text" class="form-control" #productName="ngModel" [(ngModel)]="product.Name" required minlength="3" name="productname">
                                                <div class="form-control-focus"> </div>
                                                <label for="form_control_1" class="control-label">
                                          Product Name
                                                              <span class="required">*</span>
                                                          </label>
                                                <span class="help-block">Please input Product Name...</span>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="form_control_1" style="color:#888">Product Code
                                          </label>
                                                <br>
                                                <label>{{product.Code}}</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group form-md-line-input">
                                        <label for="form_control_1" class="control-label">Unit
                                          <span class="required">*</span>
                                          </label>
                                        <select class="form-control" [(ngModel)]="product.Unit" #productUnit="ngModel" name="productUnit" required>
                                          <option *ngFor="let unit of allUnit" [value]="unit.Name">{{unit.Name}}</option>
                                        </select>
                                        <!-- <angular2-multiselect [ngModelOptions]="{standalone:true}" [data]="allUnit" [(ngModel)]="selectedUnit" [settings]="dropdownSettingsUnit"></angular2-multiselect> -->

                                    </div>

                                </div>
                                <!-- End Info Product -->

                                <!-- Image -->
                                <div class="col-md-4">

                                    <label>Upload Image</label>
                                    <div class="form-group-lg">

                                        <div class="fileinput fileinput-new" data-provides="fileinput">
                                            <div class="fileinput-new thumbnail" style="width: 200px; height: 150px;">
                                                <img src="https://www.placehold.it/200x150/EFEFEF/AAAAAA&amp;text=no+image" alt="" /> </div>
                                            <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"> </div>
                                            <div>
                                                <span class="btn default btn-file">
                                                                                            <span class="fileinput-new"> Select image </span>
                                                <span class="fileinput-exists"> Change </span>
                                                <input type="file" #imageProduct name="imageProduct"> </span>
                                                <a href="javascript:;" class="btn red fileinput-exists" data-dismiss="fileinput"> Remove </a>
                                                <p class="help-block label label-danger"> *png, *jpg, *jpeg</p>
                                                <input type="hidden" [(ngModel)]="product.Image" name="imageUrl">
                                            </div>
                                        </div>
                                        <!-- <input type="text" class="form-control" #productImg="ngModel" [(ngModel)]="product.Image" required> -->
                                    </div>

                                </div>
                                <!-- Eng Image -->
                            </div>
                            <hr>
                            <!-- Drop Down -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="form_control_1" class="control-label">Categories
<span class="required">*</span>
</label>
                                        <angular2-multiselect [ngModelOptions]="{standalone:true}" [data]="allCategories" [(ngModel)]="productCategories" [settings]="dropdownSettingsCategory"></angular2-multiselect>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label for="form_control_1" class="control-label">Supplier
<span class="required">*</span>
</label>
                                    <angular2-multiselect [ngModelOptions]="{standalone:true}" [data]="allSuppliers" [(ngModel)]="productSuppliers" [settings]="dropdownSettingsSupplier"></angular2-multiselect>
                                </div>
                            </div>
                            <hr>
                            <!-- End Drop Down -->
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="form_control_1" class="control-label">Properties
                                        <span class="required">*</span>
                                    </label>
                                        <angular2-multiselect [ngModelOptions]="{standalone:true}" [data]="allPropertiesGroup" [(ngModel)]="productPropertiesGroup" [settings]="dropdownSettingsPropertiesGroup"></angular2-multiselect>
                                        <div *ngFor="let x of productPropertiesGroup">
                                            <div class="form-group" [(ngModelGroup)]="productProperty">
                                                <div *ngFor="let a of x.Property; let i = index">
                                                    <label class="col-md-3 control-label">{{a.Name}}</label>
                                                    <div class="col-md-9">
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input ">
                                                                    <input type="hidden" class="form-control" [(ngModel)]="x.Property[i].ID" name="a.{{i}}.propertyID" value="{{a.ID}}" />
                                                                    <input type="text" placeholder="3" class="form-control" [(ngModel)]="x.Property[i].Value" required name="a.{{i}}.Value" />
                                                                    <div class="form-control-focus"> </div>
                                                                    <label for="form_control_1" class="control-label">Value
                          <span class="required">*</span>
                        </label>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="form-group form-md-line-input">
                                                                    <input type="text" placeholder="meter" class="form-control" [(ngModel)]="x.Property[i].Unit" required name="a.{{i}}.Unit" />
                                                                    <div class="form-control-focus"> </div>
                                                                    <label for="form_control_1" style="color:#888">Unit
                                                      </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <br>
                                    <a type="button" (click)="addProperty()" class="btn btn-outline blue-sharp btn-circle">
                                        <i class="fa fa-plus"></i>
                                    </a>
                                    <!-- Form Group -->
                                    <div [formGroup]="propertyForm">
                                        <div *ngFor="let x of property; let in = index">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <div class="form-group form-md-line-input ">
                                                        <input type="text" [(ngModel)]="x.Name" formControlName="propertyName" name="propertyName_{{i}}" class="form-control">
                                                        <div class="form-control-focus"> </div>
                                                        <label for="form_control_1" class="control-label">Name
                  <span class="required">*</span>
                </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-4">
                                                    <div class="form-group form-md-line-input ">
                                                        <input type="text" [(ngModel)]="x.Value" formControlName="propertyValue" name="propertyValue_{{i}}" class="form-control">
                                                        <div class="form-control-focus"> </div>
                                                        <label for="form_control_1" class="control-label">Value
                    <span class="required">*</span>
                  </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <div class="form-group form-md-line-input">
                                                        <input type="text" [(ngModel)]="x.Unit" formControlName="propertyUnit" name="propertyUnit_{{i}}" class="form-control">
                                                        <div class="form-control-focus"> </div>
                                                        <label for="form_control_1" style="color:#888">Unit
                                                      </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-1">
                                                    <h2></h2>
                                                    <button type="button" class="btn green-jungle btn-circle" [disabled]="!propertyForm.valid" (click)="saveProperty(x.PropertiesID)">
                  <i class="fa fa-save"></i>
                </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- End Form Group -->
                                    <div *ngIf="propertyFull.length > 0">
                                        <table class="table table-striped table-bordered table-hover table-checkable order-column" id="sample_1">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th> Property Name </th>
                                                    <th style="width:25%"> Value </th>
                                                    <th style="width:25%"> Unit </th>
                                                    <th style="width:15%"> Actions </th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                                <tr class="odd gradeX" *ngFor="let x of propertyFull; let in = index">
                                                    <td>{{in+1}}</td>
                                                    <td>
                                                        {{x.Property.Name}}
                                                    </td>
                                                    <td>
                                                        {{x.Value}}
                                                    </td>
                                                    <td>
                                                        {{x.Unit}}
                                                    </td>
                                                    <td>
                                                        <div class="btn-group" role="menu">
                                                            <a type="button" class="btn btn-info btn-circle" (click)="editProperty(x.PropertiesID)">
                                                                <i class="fa fa-pencil"></i>
                                                            </a>
                                                            <a type="button" class="btn btn-danger btn-circle" (click)="removeProperty(x.PropertiesID)" style="margin-left:10px">
                                                                <i class="fa fa-minus"></i>
                                                            </a>
                                                        </div>
                                                    </td>
                                                </tr>


                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="form-actions">
                            <div class="row">
                                <div class="col-md-offset-3 col-md-9">
                                    <button type="submit" class="btn green" [disabled]="!editProductForm.form.valid">Edit Product</button>
                                    <a type="button" [routerLink]="['../']" class="btn grey">Cancel</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <!-- END FORM-->

            </div>
        </div>
    </div>
</div>